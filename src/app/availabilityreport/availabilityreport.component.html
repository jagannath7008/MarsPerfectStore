<div class="page-card pb-4">
    <app-pagebreadcrumb></app-pagebreadcrumb>
    <div class="container p-0 m-0">
      <h4>{{HeaderName | uppercase}}</h4>
    </div>
    <div class="pl-0 pr-1 d-inline-block panel-body col-md-12 col-xs-12">
  <div class="row">
    <div class="col-md-6">
      <div class="pl-0 pr-0 form-group col-md-12 col-sm-12 d-inline-block">
        <input id="ShopFilter" placeholder="Global search" class="form-control" [(ngModel)]="searchQuery" (keyup)="FilterLocaldata()"
          required="required" type="text">
      </div>
    </div>
    <div class="col-md-6 d-inline-block text-right no-padding">
      <button type="submit" (click)="ResetFilter()" class="btn btn-outline-info mr-1">
        <i class="fas fa-sync"></i>&ensp;Reset</button>
        <!-- <button type="button" (click)="ExportToExcel()" class="btn btn-success"><i
          class="fa fa-plus"></i>&ensp;Export</button> -->
    </div>
  </div>
  <div id="viewfeestimetable-dv" class="h-tbl">
    <div id="dynamic-grid-table" class="table-responsive border">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th>
                    Category
                  </th>
                  <th>
                    TotalNoStore
                  </th>
                  <th>
                    AvailableIn
                  </th>
                  <th>
                    % Availability
                  </th>
                </tr>
              </thead>
              <tbody>
                <ng-container *ngIf="TodayJourneyPlanViewModel == null || TodayJourneyPlanViewModel.length == 0">
                  <tr class="cls_norecord">No record found</tr>
                </ng-container>
                <ng-container *ngFor="let row of TodayJourneyPlanViewModel;let i=index">
                  <tr>
                    <td>
                      <span>{{row.CategoryCode}}</span>
                    </td>
                    <td>
                      <span>{{row.TotalNoOfStores}}</span>
                    </td>
                    <td>
                      <span>{{row.AvailabileIn}}</span>
                    </td>
                    <td>
                      <span>{{row.AvailabilityPercentage}}</span>
                    </td>
                    <td>                    
                      <span>
                        <a (click)="ActiveRow[i]=!ActiveRow[i]">
                          <img src={{icon}} (click)="toggleIcon($event)" />
                        </a>
                      </span>
  
                    </td>
                  </tr>
                  <tr *ngIf="ActiveRow[i]">
                    <td colspan="8" cellpadding="5">
                      <table style="width:100%;margin-left:0%;" class="table">
                        <thead>
                          <tr style="background-color:#6f6f6f">                            
                            <th>
                              Brand
                            </th>
                            <th>
                              TotalNoStore
                            </th>
                            <th>
                              AvailableIn
                            </th>
                            <th>
                              % Availability
                            </th>
                           
                          </tr>
                        </thead>
                        <tbody class="cls_new_grid_style">
                          <ng-container *ngIf="row.lstAvailabilityReportBrandViewModel == null || row.lstAvailabilityReportBrandViewModel.length == 0">
                            <tr class="cls_norecord">No record found</tr>
                          </ng-container>
                          <ng-container *ngFor="let ChildRow of row.lstAvailabilityReportBrandViewModel;let j=index">
                            <tr> 
                              <td>
                                <span>{{ChildRow.BrandCode}}</span>
                              </td>
                              <td>
                                <span>{{ChildRow.TotalNoOfStores}}</span>
                              </td>
                              <td>
                                <span>{{ChildRow.AvailabileIn}}</span>
                              </td>
                              <td>
                                <span>{{ChildRow.AvailabilityPercentage}}</span>
                              </td>
                              <td>
                                <span>
                                  <a (click)="ActiveRowGC[j]=!ActiveRowGC[j]">
                                    <img src={{icon}} (click)="toggleIcon($event)" />
                                  </a>
                                </span>
                              </td>
                             
                            </tr>
                            <tr *ngIf="ActiveRowGC[j]">
                              <td colspan="8" cellpadding="5">
                                <table style="width:100%;margin-left:0%;" class="table">
                                  <thead>
                                    <tr style="background-color:#6f6f6f">                            
                                      <th>
                                        ParentSKU
                                      </th>
                                      <th>
                                        TotalNoStore
                                      </th>
                                      <th>
                                        AvailableIn
                                      </th>
                                      <th>
                                        % Availability
                                      </th>
                                     
                                    </tr>
                                    </thead>
                                    <tbody class="cls_new_grid_style">
                                      <ng-container *ngIf="ChildRow.lstAvailabilityReportSKUViewModel == null || ChildRow.lstAvailabilityReportSKUViewModel.length == 0">
                                        <tr class="cls_norecord">No record found</tr>
                                      </ng-container>
                                      <ng-container *ngFor="let GCRow of ChildRow.lstAvailabilityReportSKUViewModel">
                                        <tr> 
                                          <td>
                                            <span>{{GCRow.ItemCode}}</span>
                                            </td>
                                            <td>
                                              <span>{{GCRow.TotalNoOfStores}}</span>
                                              </td>
                                              <td>
                                                <span>{{GCRow.AvailabileIn}}</span>
                                                </td>
                                                <td>
                                                  <span>{{GCRow.AvailabilityPercentage}}</span>
                                                  </td>
                                            </tr>
                                            </ng-container>
                                            </tbody>
                                    </table>
                                </td>
                                </tr> 
                          </ng-container>
                        </tbody>
                        </table>
                    </td>
                  </tr>
                </ng-container>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  
            
        
             